<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - General Store Management</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <div class="nav-brand">
            <span>ğŸª General Store</span>
        </div>
        <button class="mobile-menu-btn" id="mobileMenuBtn">â˜°</button>
    </nav>
    
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>ğŸª General Store</h2>
                <p>Stock Management</p>
            </div>
            
            <nav class="sidebar-nav">
                <a href="{{ url_for('dashboard') }}" class="nav-item active">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span>Dashboard</span>
                </a>
                <a href="{{ url_for('add_product') }}" class="nav-item">
                    <span class="nav-icon">â•</span>
                    <span>Add Product</span>
                </a>
                <a href="{{ url_for('view_stock') }}" class="nav-item">
                    <span class="nav-icon">ğŸ“¦</span>
                    <span>View Stock</span>
                </a>
                <a href="{{ url_for('expiry_alert') }}" class="nav-item">
                    <span class="nav-icon">âš ï¸</span>
                    <span>Expiry Alerts</span>
                </a>
                <a href="{{ url_for('pending_suppliers') }}" class="nav-item">
                    <span class="nav-icon">ğŸ’°</span>
                    <span>Pending Payments</span>
                </a>
                <a href="{{ url_for('export_stock_csv') }}" class="nav-item">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span>Export Stock CSV</span>
                </a>
                <a href="{{ url_for('export_pending_csv') }}" class="nav-item">
                    <span class="nav-icon">ğŸ“‹</span>
                    <span>Export Pending CSV</span>
                </a>
                <a href="{{ url_for('logout') }}" class="nav-item logout">
                    <span class="nav-icon">ğŸšª</span>
                    <span>Logout</span>
                </a>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h1>Dashboard</h1>
                <p>Stock overview and statistics</p>
            </header>
            
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <!-- Dashboard Cards -->
            <div class="dashboard-grid">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“¦</div>
                    <div class="stat-content">
                        <h3>{{ total_products }}</h3>
                        <p>Total Products</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“Š</div>
                    <div class="stat-content">
                        <h3>{{ total_quantity }}</h3>
                        <p>Total Stock Quantity</p>
                    </div>
                </div>
                
                <div class="stat-card warning">
                    <div class="stat-icon">âš ï¸</div>
                    <div class="stat-content">
                        <h3>{{ near_expiry_count }}</h3>
                        <p>Near Expiry (â‰¤7 days)</p>
                    </div>
                </div>
                
                <div class="stat-card danger">
                    <div class="stat-icon">ğŸš¨</div>
                    <div class="stat-content">
                        <h3>{{ expired_count }}</h3>
                        <p>Expired Items</p>
                    </div>
                </div>
                
                <div class="stat-card pending">
                    <div class="stat-icon">ğŸ’°</div>
                    <div class="stat-content">
                        <h3>â‚¹{{ "%.2f"|format(pending_total) }}</h3>
                        <p>Total Pending Payments</p>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="action-buttons">
                    <a href="{{ url_for('add_product') }}" class="btn btn-primary">
                        <span>â•</span> Add New Product
                    </a>
                    <a href="{{ url_for('view_stock') }}" class="btn btn-secondary">
                        <span>ğŸ“¦</span> View All Stock
                    </a>
                    <a href="{{ url_for('expiry_alert') }}" class="btn btn-warning">
                        <span>âš ï¸</span> Check Expiry Alerts
                    </a>
                    <a href="{{ url_for('pending_suppliers') }}" class="btn btn-info">
                        <span>ğŸ’°</span> Pending Payments
                    </a>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        
        mobileMenuBtn.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768) {
                if (!sidebar.contains(event.target) && !mobileMenuBtn.contains(event.target)) {
                    sidebar.classList.remove('active');
                }
            }
        });
    </script>
</body>
</html>
